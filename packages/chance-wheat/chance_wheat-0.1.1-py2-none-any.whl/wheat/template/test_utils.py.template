#!/usr/bin/env python
# -*- coding: utf-8 -*-
# File: {FILE_NAME}
# Author: {AUTHOR_NAME}
import arrow
import json

from nose.tools import assert_equals

from {PROJECT_NAME} import utils


def test_generate_instance_id():
    """Check if `utils.generate_instance_id` works
    """
    fake_date = arrow.get('2017-09-09').naive
    fake_theme = 'test'
    assert_equals(len(utils.generate_instance_id(fake_date, fake_theme)), 32)


def test_create_statistics():
    """Check if `utils.create_statistics` works
    """
    fake_instance_id = u'test'

    expect_dict = {
        u'status': None, u'finish_time': None, u'theme': u'{PROJECT_NAME}',
        u'service': u'{SERVICE_NAME}', u'exception_info': None,
        u'instance_id': u'test',
        u'start_time': arrow.now().format(),
    }

    statistics = utils.create_statistics(fake_instance_id)

    assert_equals(json.loads(str(statistics)), expect_dict)
