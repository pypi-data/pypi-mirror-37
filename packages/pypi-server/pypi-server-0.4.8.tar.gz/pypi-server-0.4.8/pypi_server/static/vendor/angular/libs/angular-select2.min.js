angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(h,m){var n={};h&&angular.extend(n,h);return{require:"ngModel",priority:1,compile:function(f,h){var l,c,k=f.is("select"),p=angular.isDefined(h.multiple);f.is("select")&&(c=f.find("optgroup[ng-repeat], optgroup[data-ng-repeat], option[ng-repeat], option[data-ng-repeat]"),c.length&&(c=c.attr("ng-repeat")||c.attr("data-ng-repeat"),l=jQuery.trim(c.split("|")[0]).split(" ").pop()));return function(g,
b,c,a){var e=angular.extend({},n,g.$eval(c.uiSelect2)),f=function(a){var b;e.simple_tags?(b=[],angular.forEach(a,function(a,d){b.push(a.id)})):b=a;return b},q=function(a){var b=[];if(!a)return b;e.simple_tags?(b=[],angular.forEach(a,function(a,d){b.push({id:a,text:a})})):b=a;return b};k?(delete e.multiple,delete e.initSelection):p&&(e.multiple=!0);if(a&&(g.$watch(h.ngModel,function(b,c){b&&b!==c&&a.$render()},!0),a.$render=function(){if(k)b.select2("val",a.$viewValue);else if(e.multiple){a.$isEmpty=
function(a){return!a||0===a.length};var d=a.$viewValue;angular.isString(d)&&(d=d.split(","));b.select2("data",q(d));e.sortable&&b.select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){b.select2("onSortStart")},update:function(){b.select2("onSortEnd");b.trigger("change")}})}else angular.isObject(a.$viewValue)?b.select2("data",a.$viewValue):a.$viewValue?b.select2("val",a.$viewValue):b.select2("data",null)},l&&g.$watch(l,function(d,c,e){angular.equals(d,c)||
m(function(){b.select2("val",a.$viewValue);a.$render();d&&!c&&a.$setPristine&&a.$setPristine(!0)})}),a.$parsers.push(function(d){b.prev().toggleClass("ng-invalid",!a.$valid).toggleClass("ng-valid",a.$valid).toggleClass("ng-invalid-required",!a.$valid).toggleClass("ng-valid-required",a.$valid).toggleClass("ng-dirty",a.$dirty).toggleClass("ng-pristine",a.$pristine);return d}),!k&&(b.bind("change",function(d){d.stopImmediatePropagation();g.$$phase||g.$root.$$phase||g.$apply(function(){a.$setViewValue(f(b.select2("data")))})}),
e.initSelection))){var r=e.initSelection;e.initSelection=function(d,c){r(d,function(d){var e=a.$pristine;a.$setViewValue(f(d));c(d);e&&a.$setPristine();b.prev().toggleClass("ng-pristine",a.$pristine)})}}b.bind("$destroy",function(){b.select2("destroy")});c.$observe("disabled",function(a){b.select2("enable",!a)});c.$observe("readonly",function(a){b.select2("readonly",!!a)});c.ngMultiple&&g.$watch(c.ngMultiple,function(a){c.$set("multiple",!!a);b.select2(e)});m(function(){b.select2(e);b.select2("data",
a.$modelValue);a.$render();if(!e.initSelection&&!k){var c=a.$pristine;a.$pristine=!1;a.$setViewValue(f(b.select2("data")));c&&a.$setPristine();b.prev().toggleClass("ng-pristine",a.$pristine)}})}}}}]);