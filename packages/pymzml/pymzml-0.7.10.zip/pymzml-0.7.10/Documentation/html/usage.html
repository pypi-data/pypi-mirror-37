

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Usage &mdash; pymzML 0.7.6 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pymzML 0.7.6 documentation" href="index.html"/>
        <link rel="next" title="3. Module Run" href="run.html"/>
        <link rel="prev" title="1. Introduction" href="intro.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pymzML
          

          
          </a>

          
            
            
              <div class="version">
                0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage">2.1. Basic usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-usage">2.2. Advanced usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="run.html">3. Module Run</a></li>
<li class="toctree-l1"><a class="reference internal" href="spec.html">4. Class Spectrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="obo.html">5. OBO parser Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot.html">6. Plotting functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">7. Example scripts</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">pymzML</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>2. Usage</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/usage.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<h1>2. Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>This Chapter deals with some features of pymzml and explains the basic usage.</p>
<div class="section" id="basic-usage">
<h2>2.1. Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>The Python scripting language is extended by pymzML to enable rapid evaluation,
prototyping and even complex evaluation of large mass spectrometry datasets.
The following examples are executed within the Python console
(indicated by &#8220;&gt;&gt;&gt;&#8221; ) but can equally be incorporated in standalone scripts.</p>
<p>The pymzML file object is declared as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pymzml</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msrun</span> <span class="o">=</span> <span class="n">pymzml</span><span class="o">.</span><span class="n">run</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="s2">&quot;big-1.0.0.mzML&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The input files can be plain or compressed mzML files.
Initialization of the Run class accepts additional keywords, i.e.
precision of MS1 or MSn runs and extra accessions (see: <a class="reference internal" href="obo.html#module-obo" title="obo"><code class="xref py py-class docutils literal"><span class="pre">obo</span></code></a>).
The run object returns an iterator, hence one can loop over all spectra
and/or chromatograms using classic Python syntax.
Additionally, one can retrieve a specific spectrum by its nativeID via
random access using msrun[1], msrun[&#8216;TIC&#8217;] to access the chromatogram
or in case of MRM experiments as e.g. msrun[&#8216;transition_445-672&#8217;].
Note that random access requires the mzML file not to be
compressed or truncated by a conversion program.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">spectrum</span> <span class="ow">in</span> <span class="n">msrun</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="k">if</span> <span class="n">spectrum</span><span class="p">[</span><span class="s1">&#39;ms level&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spectrum_with_nativeID_100</span> <span class="o">=</span> <span class="n">msrun</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span>
</pre></div>
</div>
<p>Each iteration returns a spectrum object (<a class="reference internal" href="spec.html#spec.Spectrum" title="spec.Spectrum"><code class="xref py py-obj docutils literal"><span class="pre">spec.Spectrum</span></code></a>)  which offers basic
information on the spectrum.
The information can be accessed like a Python dictionary.
The keys in this dictionary are the accession numbers (e.g. MS:1000511)
or the name of the accession (e.g. &#8220;ms level&#8221;), as they are defined by the
HUPO Proteomics Standards Initiative in the mzML vocabulary, i.e. in the OBO files.
Both keys of the spectrum dictionary point to the value that has been extracted from
the mzML file (see: <a class="reference internal" href="obo.html#module-obo" title="obo"><code class="xref py py-class docutils literal"><span class="pre">obo</span></code></a>).
Association of MS tag to name is done on the basis of the OBO
files which are supplied in the pymzML package.
The pymzML package offers a simple script (see: <a class="reference internal" href="examples.html#module-queryOBO" title="queryOBO"><code class="xref py py-obj docutils literal"><span class="pre">queryOBO</span></code></a>) that can be used to
translate between MS tags and names. Examples for accessing MS tags by their names can be found here: <a class="reference internal" href="obo.html"><span class="doc">OBO parser Class</span></a>.
It is worth noting that the definition of MS tags and their attribute that the user wants to be associated with the tag and the trivial name is a feature.
For example, the scan time is associated with two values, the actual time and its unit.
From a programming point of view, access to the time as float by calling spectrum[&#8216;scan time&#8217;] is desirable. Defining those attributes and their value one is interested in, facilitates live ;)</p>
<p>Data that is associated with the current spectrum,
i.e. mass over charge (m/z) or intensity values can be accessed by the .mz (<a class="reference internal" href="spec.html#spec.Spectrum.mz" title="spec.Spectrum.mz"><code class="xref py py-obj docutils literal"><span class="pre">spec.Spectrum.mz</span></code></a>)
or .intensity (<a class="reference internal" href="spec.html#spec.Spectrum.i" title="spec.Spectrum.i"><code class="xref py py-obj docutils literal"><span class="pre">spec.Spectrum.i</span></code></a>) properties, respectively, which are iterators themselves.
The .peaks (<a class="reference internal" href="spec.html#spec.Spectrum.peaks" title="spec.Spectrum.peaks"><code class="xref py py-obj docutils literal"><span class="pre">spec.Spectrum.peaks</span></code></a>) property also offers an iterator which returns mz and
intensity as a tuple for each peak:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">mz</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">spectrum</span><span class="o">.</span><span class="n">peaks</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>      <span class="nb">print</span><span class="p">(</span><span class="n">mz</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>Since mass spectrometry data can be measured in profile mode, the
.centroidedPeak (<a class="reference internal" href="spec.html#spec.Spectrum.centroidedPeaks" title="spec.Spectrum.centroidedPeaks"><code class="xref py py-obj docutils literal"><span class="pre">spec.Spectrum.centroidedPeaks</span></code></a>) property offers an iterator which performs a
simple Gauss fit on the profiled data, thereby returning the
fitted m/z and maximum intensity of the bell shape curve as tuple.
Basic visualization of spectra using XHTML and SVG can be done using
the <a class="reference internal" href="plot.html#module-plot" title="plot"><code class="xref py py-mod docutils literal"><span class="pre">plot</span></code></a> submodule.</p>
</div>
<div class="section" id="advanced-usage">
<h2>2.2. Advanced usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">¶</a></h2>
<p>The spectrum class also offers other functions, such as deconvolution,
estimation of similarity of spectra, simple noise reduction, addition of spectra
and simple arithmetics on the intensity values by multiplication or division.
An averaged spectrum can be created during parsing as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">pymzml</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">Spectrum</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">msrun</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;ms level&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">t</span> <span class="o">+=</span> <span class="n">s</span> <span class="o">/</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;total ion current&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The addition of spectra is done by creating Gaussian distributions around the
centroided peak. This reprofiling is done internally as part of the addition
and its values can be accessed by the .reprofiledPeaks (<a class="reference internal" href="spec.html#spec.Spectrum.reprofiledPeaks" title="spec.Spectrum.reprofiledPeaks"><code class="xref py py-obj docutils literal"><span class="pre">spec.Spectrum.reprofiledPeaks</span></code></a>) property of the spectrum.
To reduce the computational overhead one can remove noise by calling
the .removeNoise() (<a class="reference internal" href="spec.html#spec.Spectrum.removeNoise" title="spec.Spectrum.removeNoise"><code class="xref py py-func docutils literal"><span class="pre">spec.Spectrum.removeNoise()</span></code></a>)  method of the spectrum class.
This method accepts different modes of noise reduction.
Deconvoluted peaks can be accessed for high precision spectra by calling the
.deconvolutedPeaks (<a class="reference internal" href="spec.html#spec.Spectrum.deconvolutedPeaks" title="spec.Spectrum.deconvolutedPeaks"><code class="xref py py-obj docutils literal"><span class="pre">spec.Spectrum.deconvolutedPeaks</span></code></a>)  property.
The pymzML package contains detailed example scripts for all these methods. ( <a class="reference internal" href="examples.html"><span class="doc">Example scripts</span></a> )</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="run.html" class="btn btn-neutral float-right" title="3. Module Run" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral" title="1. Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2014, Till Bald, Johannes Barth, Anna Niehues, Michael Specht, Michael Hippler, Christian Fufezan.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.7.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>