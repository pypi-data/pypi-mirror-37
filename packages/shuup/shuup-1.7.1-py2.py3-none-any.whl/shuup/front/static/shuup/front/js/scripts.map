{"version":3,"sources":["language_changer.js","navigation.js","category.js","carousel.js","product_preview.js","update_price.js","custom.js","index.js"],"names":["window","changeLanguage","form","document","createElement","method","action","input","type","name","id","value","$","data","appendChild","body","submit","click","closeMobileNav","removeClass","mobileNavIsOpen","hasClass","on","focus","e","stopPropagation","addClass","target","closest","length","$currentlySelectedPage","parents","getFilterString","state","filterString","each","key","shouldAppendAmpersand","indexOf","constructor","Array","join","reloadProducts","$cont","$prods","$adminMenu","adminMenuHeight","height","top","offset","scrollTo","load","location","pathname","refreshFilters","pageNumber","pagination","page","PRODUCT_LIST_FILTERS","idx","filterObj","is","val","values","find","push","prop","parseInt","isNaN","PAGE_NUMBER","history","pushState","addEventListener","parent","host_str","host","href","autoplay","JSON","parse","interval","arrowsVisible","toLowerCase","pauseOnHover","useDotNavigation","owlCarousel","slideCountToResponsiveData","items","slideCount","responsiveConfigure","showPreview","productId","modalSelector","$productModal","modal","remove","ajax","append","updatePrice","selectpicker","$quantity","$simpleVariationSelect","serializeArray","forEach","obj","url","dataType","done","responseText","$content","parseHTML","priceDiv","not","replaceWith"],"mappings":"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","file":"scripts.map","sourceRoot":"../../../../static_src/js","sourcesContent":["/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nwindow.changeLanguage = function changeLanguage() {\n    const form = document.createElement(\"form\");\n    form.method = \"POST\";\n    form.action = \"/set-language/\";\n    const input = document.createElement(\"input\");\n    input.type = \"hidden\";\n    input.name = \"language\";\n    input.id = \"language-field\";\n    input.value = $(this).data(\"value\");\n    form.appendChild(input);\n    document.body.appendChild(form);\n    form.submit();\n};\n\n$(function() {\n    $(\".languages li a\").click(window.changeLanguage);\n});\n","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n$(function() {\n    $(\"#search-modal\").on(\"show.bs.modal\", function() {\n        setTimeout(function() {\n            $(\"#site-search\").focus();\n        }, 300);\n    });\n\n    function openMobileNav() {\n        $(document.body).addClass(\"menu-open\");\n    }\n\n    function closeMobileNav() {\n        $(document.body).removeClass(\"menu-open\");\n    }\n\n    function mobileNavIsOpen() {\n        return $(document.body).hasClass(\"menu-open\");\n    }\n\n    $(\".toggle-mobile-nav\").click(function(e) {\n        e.stopPropagation();\n        if (mobileNavIsOpen()) {\n            closeMobileNav();\n        } else {\n            openMobileNav();\n        }\n    });\n\n    $(document).click(function(e) {\n        if (mobileNavIsOpen() && !$(e.target).closest(\".pages .nav-collapse\").length) {\n            closeMobileNav();\n        }\n\n    });\n\n    $(\".main-nav .dropdown-menu\").click(function(e) {\n        e.stopPropagation();\n    });\n\n    // Add proper classes to category navigation based on current-page class\n    var $currentlySelectedPage = $(\".current-page\");\n    if ($currentlySelectedPage.length > 0) {\n        $currentlySelectedPage.addClass(\"current\");\n        $currentlySelectedPage.parents(\"li\").addClass(\"current\");\n    }\n});\n","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nwindow.refreshFilters = function refreshFilters(pageNumber) {\n    var pagination = $(\"ul.pagination\");\n    var state = {page: pageNumber ? pageNumber : 1};\n    $.each(window.PRODUCT_LIST_FILTERS, function(idx, key) {\n        var filterObj = $(\"#id_\" + key);\n        if (filterObj.is(\"select\")) {  // Basic select, checkbox etc...\n            state[key] = filterObj.val();\n        } else if (filterObj.is(\"div\")) {  // Should be filter widget\n            var values = [];\n            filterObj.find(\"input:checked\").each(function() {\n                values.push($(this).val());\n            });\n            state[key] = values;\n        }\n    });\n\n    var filterString = getFilterString(state);\n    if (pagination.length > 0) {\n        // Prevent double clicking when ajax is loading\n        if (pagination.prop(\"disabled\")) {\n            return false;\n        }\n        pagination.prop(\"disabled\", true);\n\n        if (typeof (pageNumber) !== \"number\") {\n            pageNumber = parseInt(pageNumber);\n            if (isNaN(pageNumber)) {\n                return false;\n            }\n        }\n        window.PAGE_NUMBER = pageNumber;\n    }\n\n\n    reloadProducts(filterString);\n\n    if (window.history && window.history.pushState) {\n        history.pushState(state, null, filterString);\n    }\n    // prevent scroll to page buttons\n    return false;\n};\n\nfunction getFilterString(state) {\n    var filterString = \"\";\n    if(state !== null) {\n        filterString = \"?\";\n        $.each(state, function(key, value) {\n            var shouldAppendAmpersand = (\"&?\".indexOf(filterString[filterString.length-1]) > 0);\n            filterString += (shouldAppendAmpersand ? \"\" : \"&\");\n            if (value.constructor === Array) {\n                filterString += (value.length > 0 ? (key + \"=\" + value.join(\"&\" + key + \"=\")) : \"\");\n            } else {\n                filterString += (value ? key + \"=\" + value: \"\");\n            }\n        });\n    }\n    return filterString;\n}\n\nfunction reloadProducts(filterString) {\n    const $cont = $(\"#ajax_content\");\n    if ($cont.length === 0) {\n        return;\n    }\n    const $prods = $(\".products-wrap\");\n    const $adminMenu = $(\"#admin-tools-menu\");\n    const adminMenuHeight = ($adminMenu.length > 0) ? $adminMenu.height() : 0;\n    const top = ($prods.length > 0) ? $prods.offset().top : $cont.offset().top;\n    window.scrollTo(0, top - adminMenuHeight);\n\n    // this is to ensure browser back/forward from different domain does a full refresh\n    filterString += (filterString === \"\") ? \"?\" : \"&\";\n    filterString += \"ajax=1\";\n    $cont.load(location.pathname + filterString);\n}\n\n$(function() {\n    window.addEventListener(\"popstate\", function(e) {\n        reloadProducts(getFilterString(e.state));\n    });\n\n    $.each(window.PRODUCT_LIST_FILTERS, function(idx, key) {\n        if($(\"#id_\" + key).parent(\".form-group\").hasClass(\"has-error\")) {\n            const host_str = '//' + location.host + location.pathname;\n            window.location.href = host_str;\n        }\n        $(\"#id_\" + key).on(\"change\", function() {\n            window.refreshFilters(window.PAGE_NUMBER);\n        });\n    });\n});\n","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n$(function() {\n    $(\".carousel-plugin.one\").each(function () {\n        var autoplay = JSON.parse($(this).data(\"autoplay\"));\n        var interval = JSON.parse($(this).data(\"interval\"));\n        var arrowsVisible = JSON.parse($(this).data(\"arrows-visible\").toLowerCase());\n        var pauseOnHover = JSON.parse($(this).data(\"pause-on-hover\").toLowerCase());\n        var useDotNavigation = JSON.parse($(this).data(\"use-dot-navigation\").toLowerCase());\n        $(this).owlCarousel({\n            loop: true,\n            autoplay: autoplay,\n            autoplayTimeout: interval,\n            autoplayHoverPause: pauseOnHover,\n            nav: arrowsVisible,\n            navText: [\n                '<i class=\"fa fa-angle-left .carousel-control .icon-prev\"></i>',\n                '<i class=\"fa fa-angle-right .carousel-control .icon-prev\"></i>'\n            ],\n            dots: useDotNavigation,\n            items: 1\n        });\n    });\n\n    var slideCountToResponsiveData = {\n        2: {0: {items: 1}, 640: {items: 2}, 992: {items: 2}},\n        3: {0: {items: 2}, 640: {items: 2}, 992: {items: 3}},\n    };\n\n    $(\".carousel-plugin.banner\").each(function () {\n        var slideCount = JSON.parse($(this).data(\"slide-count\"));\n        var arrowsVisible = JSON.parse($(this).data(\"arrows-visible\").toLowerCase());\n        var responsiveConfigure = slideCountToResponsiveData[slideCount];\n        $(this).owlCarousel({\n            margin: 30,\n            nav: arrowsVisible,\n            navText: [\n                '<i class=\"fa fa-angle-left .carousel-control .icon-prev\"></i>',\n                '<i class=\"fa fa-angle-right .carousel-control .icon-prev\"></i>'\n            ],\n            responsiveClass: true,\n            responsive: (responsiveConfigure ? responsiveConfigure : {0: {items: 2}, 640: {items: 2}, 992: {items: 4}})\n        });\n    });\n\n    // Set up owl carousel for product list with 5 items\n    $(\".owl-carousel.five\").owlCarousel({\n        margin: 20,\n        nav: true,\n        navText: [\n            \"<i class='fa fa-angle-left'></i>\",\n            \"<i class='fa fa-angle-right'></i>\"\n        ],\n        responsiveClass: true,\n        responsive: {\n            0: { // breakpoint from 0 up\n                items : 2,\n                slideBy: 2\n            },\n            640: { // breakpoint from 640 up\n                items : 4,\n                slideBy: 2\n            },\n            1200: { // breakpoint from 992 up\n                items : 5,\n                slideBy: 3\n            }\n        }\n    });\n});\n","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nwindow.showPreview = function showPreview(productId) {\n    var modalSelector = \"#product-\" + productId + \"-modal\";\n    var $productModal = $(modalSelector);\n    if ($productModal.length) {\n        $productModal.modal(\"show\");\n        return;\n    }\n\n    // make sure modals disappear and are not \"cached\"\n    $(document).on(\"hidden.bs.modal\", modalSelector, function() {\n        $(modalSelector).remove();\n    });\n\n    $.ajax({\n        url: \"/xtheme/product_preview\",\n        method: \"GET\",\n        data: {id: productId},\n        success: function(data) {\n            $(\"body\").append(data);\n            $(modalSelector).modal(\"show\");\n            window.updatePrice(productId);\n            $(\".selectpicker\").selectpicker();\n        }\n    });\n};\n","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nwindow.updatePrice = function updatePrice(productId) {\n    var $quantity = $(\"#product-quantity-\" + productId);\n    if ($quantity.length === 0 || !$quantity.is(\":valid\")) {\n        return;\n    }\n\n    var data = {\n        // In case productId is not available try to fallback to first input with correct name\n        id: productId ? productId : $(\"input[name=product_id]\").val(),\n        quantity: $quantity.val(),\n        unitType: $(\"#product-unit-type-\" + productId).val()\n    };\n\n    var $simpleVariationSelect = $(\"#product-variations-\" + productId);\n    if ($simpleVariationSelect.length > 0) {\n        // Smells like a simple variation; use the selected child's ID instead.\n        data.id = $simpleVariationSelect.val();\n    } else {\n        // See if we have variable variation select boxes; if we do, add those.\n        $(\"select.variable-variation-\" + productId).serializeArray().forEach(function(obj) {\n            data[obj.name] = obj.value;\n        });\n    }\n    jQuery.ajax({url: \"/xtheme/product_price\", dataType: \"html\", data: data}).done(function(responseText) {\n        const $content = $(\"<div>\").append($.parseHTML(responseText));\n        const priceDiv = \"#product-price-div-\" + productId;\n\n        if ($content.find(\"[id^='no-price']\").length > 0) {\n            $(\"#add-to-cart-button-\" + productId).prop(\"disabled\", true);\n        } else {\n            $(\"#add-to-cart-button-\" + productId).not(\".not-orderable\").prop(\"disabled\", false);\n        }\n        $(priceDiv).replaceWith($content.find(priceDiv));\n    });\n};\n","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n$(function() {\n    $(\".selectpicker\").selectpicker();\n});\n","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport \"./language_changer.js\";\nimport \"./navigation.js\";\nimport \"./category.js\";\nimport \"./carousel.js\";\nimport \"./product_preview.js\";\nimport \"./update_price.js\";\nimport \"./custom.js\";\n"]}