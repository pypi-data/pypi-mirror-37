
if(EXISTS "${CMAKE_CURRENT_LIST_DIR}/PyCTestPreInit.cmake")
    include("${CMAKE_CURRENT_LIST_DIR}/PyCTestPreInit.cmake")
endif(EXISTS "${CMAKE_CURRENT_LIST_DIR}/PyCTestPreInit.cmake")

if(EXISTS "${CMAKE_CURRENT_LIST_DIR}/Init.cmake")

    set(CTEST_TRIGGER "Submit" CACHE STRING
        "Delay submit until CTEST_TRIGGER == '(Any|Build|Test|Coverage|MemCheck|Submit|None)'")

    include("${CMAKE_CURRENT_LIST_DIR}/Init.cmake")
    include_if("${CMAKE_CURRENT_LIST_DIR}/PyCTestPostInit.cmake")

    message(STATUS "Starting ${MODEL} Submission - ${CTEST_BUILD_NAME} --")

    ctest_read_custom_files("${CMAKE_CURRENT_LIST_DIR}")
    ctest_start(${CTEST_MODEL}   TRACK ${CTEST_MODEL} APPEND)
    submit(Submit RETRY_COUNT 5 RETRY_DELAY 30)

    message(STATUS "Finished ${MODEL} Submission - ${CTEST_BUILD_NAME} --")

endif(EXISTS "${CMAKE_CURRENT_LIST_DIR}/Init.cmake")
