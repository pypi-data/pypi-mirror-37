{% extends edc_listboard_template %}

{% load edc_base_extras %}
{% load edc_dashboard_extras %}
{% load tz %}
{% load static %}


{% block main %}

<div class="row">

<div class="panel panel-{{ listboard_panel_style}}">
<div class="panel-heading">

<i class="{{ listboard_fa_icon }} fa-2x"></i>
                    
<span class="pull-right">
    {% include 'edc_dashboard/bootstrap3/search_form.html' %}
</span>

</div> <!--end panel heading -->

<div class="list-group">
        {% if search_term %}
            <li class="list-group-item list-group-item-success"><b>Reported Visits for {{ search_term }} {% copy_string_to_clipboard_button search_term %}</b></li>
        {% else%}
            <li class="list-group-item list-group-item-success"><b>Subjects</b></li>
        {% endif %}
    {% for result in results %}
        
        {% if search_term %}

            <a href="{{ result.dashboard_direct_href }}" class="list-group-item" title="click to go to subject dashboard for visit">{{ forloop.counter|add:page_obj.start_index|add:-1 }}. <b>{{ result.object.visit_code }}.{{ result.object.visit_code_sequence }}</b> on {{ result.object.report_datetime|date:"SHORT_DATE_FORMAT" }} </a>

        {% else%}

            <a href="?q={{ result.subject_identifier}}" class="list-group-item" title="click to list reported visits for this subject">{{ forloop.counter|add:page_obj.start_index|add:-1 }}. <b>{{ result.subject_identifier }}</b> <span class="text text-muted">{{ result.visit_count }} visits</span></a>

        {% endif %}
    {% endfor %}
    
</div>
</div>
<div class="well">{% paginator_row %}</div>
</div>


{% endblock main %}
